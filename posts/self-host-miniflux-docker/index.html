<!doctype html><html dir=ltr lang=en><head><meta charset=utf-8><title>Make Less Data: Self-Host Miniflux Feed Reader | Dakotah Peña</title><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="How to self-host Miniflux feed reader with Docker."><meta name=generator content="Hugo 0.79.1">edb9248d
2020-12-19T15:42:17Z
<link rel=canonical href=/posts/self-host-miniflux-docker/><link rel=stylesheet href=https://dakotahpena.studio/css/foundation.css><link rel=stylesheet integrity="sha256-+LFhaJdni5QOKtTvATPJEhURIEAIMaeSNMjd5E+llCI=" href=/stylesheets/app.f8b1616897678b940e2ad4ef0133c912151120400831a79234c8dde44fa59422.css crossorigin=anonymous type=text/css><meta property="og:title" content="Make Less Data: Self-Host Miniflux Feed Reader"><meta property="og:description" content="How to self-host Miniflux feed reader with Docker."><meta property="og:type" content="article"><meta property="og:url" content="https://dakotahpena.studio/posts/self-host-miniflux-docker/"><meta property="og:image" content="https://dakotahpena.studio/site-feature-image.jpg"><meta property="article:published_time" content="2021-04-28T19:16:46-07:00"><meta property="article:modified_time" content="2021-04-29T21:24:19-07:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dakotahpena.studio/site-feature-image.jpg"><meta name=twitter:title content="Make Less Data: Self-Host Miniflux Feed Reader"><meta name=twitter:description content="How to self-host Miniflux feed reader with Docker."></head><body><div class=grid-container><header id=header class="grid-x grid-padding-x"><div class="large-4 cell"><a href=https://dakotahpena.studio/ class=no-underline><h2 class=spacer-top-0>DAKOTAH PEÑA</h2></a></div><div class="large-8 cell"><nav id=primary-nav class="align-right text-right"><ul class=inline><li><a href=/work/ title=Work>Work</a></li><li><a href=/essays/ title=Writing>Writing</a></li><li><a href=/posts/ title=Blog>Blog</a></li></ul></nav></div></header><div id=content><div class="grid-x post__container"><section class="cell small-8 medium-offset-2"><a href=/posts/>&#8592; Back to Blog</a></section></div><div class="grid-x post__container"><section class="cell small-8 medium-offset-2"><h1 class=spacer-top-5>Make Less Data: Self-Host Miniflux Feed Reader</h1><div class=post__meta><time datetime="2021-04-28 19:16:46 -0700 -0700">Apr 28, 2021</time>
&#183;
<span>4 minute read</span></div><article class="post__content spacer-top-10"><p><em>This is the first in <a href=/tags/make-less-data/>a series about self-hosted services</a> that you can run yourself in order for you to be less of a product of other companies. This means you will be creating less marketable data for these companies and likely saving money in the process.</em></p><p>The shutdown of Google Reader years ago sent ripples across the internet as there was now room for competition in the form of small, paid feed reading services like Feedbin. Having been a customer of Feedbin for several years and being happy with it, I nevertheless decided to explore options for self hosting an RSS reader service as an exercise of being more self sufficient. It is even more incentive that as more apps and services become subscription-based, I wanted to reduce my growing number of recurring software subscriptions as much as possible.</p><p>While there will be many different open source web applications that can be chosen from, I decided on <a href=https://miniflux.app/>Miniflux</a> due to its focus on minimalism and simplicity feature-wise without being austere or ugly. Another benefit is that being written in Go, it means the interactions are near instantaneous. Finally, you can subscribe to YouTube channels to reduce being tracked by Google because it uses the more private <code>youtube-nocookie.com</code> domain for the video player.</p><h2 id=docker-overview>Docker Overview</h2><p>If you don&rsquo;t already have Docker installed you will need to <a href=https://www.docker.com/products/docker-desktop>install it</a> first. It is available for many operating systems and can be installed headless with package managers like homebrew, apt, and others.</p><p><em>Docker is similar to a virtual machine on your computer or server. It allows for containment of code and services so you don’t have to install, say, a database directly on your computer. It runs contained and is configured through a <code>docker-compose.yml</code> with little effort.</em></p><p>By using Docker, and Docker Compose in particular, we can avoid having to manage servers and let the configuration file (<code>docker-compose.yml</code>) handle it for us in a consistent and stable way.</p><h2 id=miniflux-setup>Miniflux Setup</h2><p>Create a directory and add file called <code>docker-compose.yml</code> with the following contents.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3&#39;</span>
<span style=color:#f92672>services</span>:
  <span style=color:#f92672>miniflux</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>miniflux/miniflux:latest</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#e6db74>&#34;8080:8080&#34;</span>
    <span style=color:#f92672>depends_on</span>:
      <span style=color:#f92672>db</span>:
        <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>service_healthy</span>
    <span style=color:#f92672>environment</span>:
      - <span style=color:#ae81ff>DATABASE_URL=postgres://miniflux:secret@db/miniflux?sslmode=disable</span>
  <span style=color:#f92672>db</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>postgres:latest</span>
    <span style=color:#f92672>env_file</span>:
      - <span style=color:#ae81ff>.env</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>miniflux-db:/var/lib/postgresql/data</span>
    <span style=color:#f92672>healthcheck</span>:
      <span style=color:#f92672>test</span>: [<span style=color:#e6db74>&#34;CMD&#34;</span>, <span style=color:#e6db74>&#34;pg_isready&#34;</span>, <span style=color:#e6db74>&#34;-U&#34;</span>, <span style=color:#e6db74>&#34;miniflux&#34;</span>]
      <span style=color:#f92672>interval</span>: <span style=color:#ae81ff>10s</span>
      <span style=color:#f92672>start_period</span>: <span style=color:#ae81ff>30s</span>
<span style=color:#f92672>volumes</span>:
  <span style=color:#f92672>miniflux-db</span>:
</code></pre></div><p>Next, create a hidden file named <code>.env</code> to store secret values for the database credentials.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env>POSTGRES_USER<span style=color:#f92672>=</span>miniflux
POSTGRES_PASSWORD<span style=color:#f92672>=</span>secretpassword

RUN_MIGRATIONS<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
CREATE_ADMIN<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
ADMIN_USERNAME<span style=color:#f92672>=</span>admin
ADMIN_PASSWORD<span style=color:#f92672>=</span>test123
</code></pre></div><p>Change the value of <code>POSTGRES_PASSWORD</code> to something more random and password-like. The latter values will run database migrations and create an administrator user with the specified username and password, respectively. You can leave the password as-is because you can change it later in the app.</p><h2 id=fire-it-up>Fire it Up</h2><p>Now you can start everything up with <code>docker-compose up -d</code> where the <code>-d</code> will start the containers in daemon mode in the background. If you need to see the output then run the command <em>without</em> <code>-d</code>.</p><p>You should be able to try out Miniflux at <code>http://localhost:8080</code> and log in with the credentials in your <code>.env</code> file. Don&rsquo;t forget to change your password.</p><p>If all goes well you will be up and running with Miniflux and be able to start adding RSS and Atom feeds to it and even YouTube channel URLs. If you have any trouble you can refer to the <a href=https://miniflux.app/docs/installation.html#docker>official documentation</a>.</p><h2 id=clean-up>Clean Up</h2><p>You can now clean up your <code>.env</code> file by removing <code>CREATE_ADMIN</code>, <code>ADMIN_USERNAME</code>, and <code>ADMIN_PASSWORD</code> since those are temporary. Technically you can remove <code>RUN_MIGRATIONS</code> but if you later update Miniflux it will need to run migrations again and it doesn&rsquo;t hurt to leave it in.</p><p>Speaking of <code>.env</code>, the instructions here differ from the original instructions in that I prefer the use of a separate file with these secret values whereas the official documentation expect you to put these values directly in the <code>docker-compose.yml</code> file. This is not ideal because you can accidentally put sensitive values into this file and accidentally commit it to version control.</p><p>The final caveat relates to the port 8080 used:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>ports</span>:
	- <span style=color:#e6db74>&#34;8080:8080&#34;</span>
</code></pre></div><p>The port values start from the outside in with the first <code>8080</code> representing what is exposed to your system. If you were to change it to <code>3000</code> it would look like <code>"3000:8080"</code> and be available at <a href=http://localhost:3000>http://localhost:3000</a>. Lower number ports like 80 (which would allow <a href=http://localhost/>http://localhost/</a> are privileged ports on most systems and require hoops to jump through to get working.</p><p>If you insist on using port 80 then the easier option is adding a reverse proxy web server in front of it like <a href=https://caddyserver.com/>Caddy</a> or <a href=https://nginx.org/en/>Nginx</a> but this is beyond the scope of this article.</p><h2 id=summary>Summary</h2><p>You should now have Miniflux running on the machine you chose to install it on. It is fine to run on your personal computer but running it on a separate server (Raspberry Pi, Synology, VPS) is a nice upgrade because you can access it from anywhere, provided you have a domain name to use.</p><p>More importantly, you are now more self-sufficient and generating less marketable data for other services to track you from.</p></article><hr><div class=meta>Filed under
<a href=/categories/tech/>Tech</a></div></section></div></div></div><div class="grid-container fluid"><footer id=footer class="grid-x grid-margin-x padder-vertical-10 spacer-top-15"><div class=footer-inner><div class="cell large-12"><h4>Review my code on <a href=https://github.com/dakotahp>GitHub</a>.
Check out my photography on <a href=https://smugmug.com/dakotahp>SmugMug</a>.<br>Sometimes I write on the <a href=/posts/>blog</a>,
which has a <a href=/index.xml>feed</a>.<br>You may <a href=/contact/>contact me</a> if you'd like.</h4><h4>👋🏼 Au révoir from Coeur d'Alene.</h4></div></div></footer></div><script src=https://dakotahpena.studio/javascripts/jquery.js></script><script src=https://dakotahpena.studio/javascripts/what-input.js></script><script src=https://dakotahpena.studio/javascripts/foundation.min.js></script><script src=https://dakotahpena.studio/javascripts/app.js></script></body></html>